<ul>
<% commands.each do |command| %>
  <li>
    &lt;<%= command.type %><% command.attributes.each do |attribute| %> <%= attribute.name %>="<%= attribute.value %>"<% end %>&gt;
    <%= command.value %>
    <% if command.children.count > 0 %>
      <%= render :partial => "commands", :locals => { :commands => command.children } %>
    <% end %>
    &lt;/<%= command.type %>&gt;
  </li>
<% end %>
</ul>
